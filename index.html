<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Rendering HTML with Drupal: Past, Present and Future</title>

    <meta name="author" content="Steve Persch">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="palantir/palantir.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->


    <style type="text/css">

    ul.inline {
      margin: 0;
      padding: 0;
      list-style-type: none;
      text-align: center;
    }

    ul.inline li {
      display: inline;
    }

    div.horiz-columns {
      display: flex;
      align-items: flex-start;
      justify-content: space-around;
      flex-wrap: nowrap;
    }
    div.horiz-columns.two-col > div,
    div.horiz-columns.two-col > ul {
      width: 50%;
    }

    ul.horiz-list {
      display: flex;
      align-items: flex-start;
      justify-content: space-around;
      flex-wrap: nowrap;
      list-style-type: none;
    }
    ul.horiz-list > li > h3 {
      text-align: center;
    }

    .horiz-columns.centered {
      align-items: center;
    }

    .reveal ul > ul {
      margin-top: 2em;
    }

    img.screencap {
      border-radius: 10px;
      width: 100%;
      height: 100%;
    }

    img.architecture-diagram {
      border-radius: 10px;
      width: 100%;
      height: 100%;
    }

    .reveal .highlight {
      color: #9fc855;
    }

    .reveal h2 + h3 {
      color: #9fc855;
    }

    table.decision-chart {
      width: 100%;
      border-collapse: collapse;
    }

    table.decision-chart,
    table.decision-chart td,
    table.decision-chart th {
      border: 1px solid #9fc855;
      padding-left: 1em;
      text-align: left;
    }

    table.decision-chart th {
      color: #9fc855;
    }

    table.decision-chart td {
      font-size: 0.6em;
    }

    img.casestudy {
      /*width: 50%;*/
      /*max-height: 400px;*/
      max-width: 400px;
    }


    </style>

  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <section>
            <h1>Rendering HTML with Drupal: Past, Present and Future</h1>
            <p>
              <small>Presented by <a href="http://www.stevepersch.com/">Steve Persch</a> (<a href="http://twitter.com/stevector">@stevector</a>)</small>
            </p>
          </section>
          <section>
            <h2>Steve Persch</h2>
            <p>Senior Engineer and Team Lead at <a href="http://palantir.net/">Palantir.net</a></p>
            <p><a href="http://twitter.com/stevector">@stevector</a> on Twitter</p>
          </section>

          <section>
            <h2>“The future is already here – it's just not evenly distributed.”</h2>
            <p><a href="http://en.wikipedia.org/wiki/William_Gibson">William Gibson</a></p>
            <aside class="notes"><p>The presentation is given from a Drupal/Palantir/Steve Persch perspective. Many of the techniques I'll call "future" are already being used successfully inside and outside of Drupal. Many of the techiques I'll call "past" are still here now and will remain for years to come.</p> 
            </aside>

          </section>


        </section>

<!--- @todo theme_item_list / theme_node dichtomy  look at hook_theme-->

        <section id="past">

          <section>
            <h2>The PAST</h2>
          </section>


          <section>
            <h2>The GIVENS of the PAST</h2>
          </section>

          <section>
            <h1>GIVEN <small>(in D5 era)</small></h1>
            <h2>Your designs are JPGs</h2>
            <h3>And doing anything in Drupal gives you a ton of HTML</h3>
            <aside class="notes"><p>In the modern/future era of static prototyping your "designs" might make a ton of CSS class name and markup for you and your CMS might not make any suggestion about HTML and class names. In the PAST that was totally reversed.</p> 
            </aside>
          </section>

          <section>
            <h2>Core names CSS classes by internal data structures</h2>
            <img src="assets/drupal-core-markup.png" alt="Drupal Core Markup" />
            <aside class="notes">
            </aside>This image shows an example of Drupal 7 markup. 
          </section>


          <section>
            <h1>GIVEN <small>(in D5 era)</small></h1>
            <h2>No preprocess on theme functions</h2>
            <h3>So CSS classes are harder to change</h3>
            <aside class="notes"><p></p> 
            </aside>
          </section>


          <section>
            <h1>GIVEN <small>(in D5 era)</small></h1>
            <h2>Your only Build Modes (View Modes) are “full” and “teaser”</h2>
            <h3>So why not use <code>arg()</code> and CSS classes on <code><body></code> to change appearance</h3>
            <aside class="notes">
              <p>In the "PRESENT" section of the presentation I'll talk more about the tools we have now for modifying markup in a Design Component mindset. That tool box was rather empty in the D5 era.
            </p> 
            </aside>
          </section>



<!-- @todo, "What are we doing". Use the Colbert image here. Our job in this mentality is to make the Drupal markup Look Like the Designs  -->


<!---

          <table class="decision-chart">
            <thead>
              <tr><th>If you want...</th> <th>Probably means...</th></tr>
            </thead>
            <tbody>
              <tr class="fragment"><td>Multiple core versions</td> <td class="fragment">Separate installs</td></tr>
              <tr class="fragment"><td>Different content types</td> <td class="fragment">Separate installs, multi-site</td></tr>
              <tr class="fragment"><td>Single user base</td> <td class="fragment">Domain Access, OG, Single-site</td></tr>
              <tr class="fragment"><td>Subdomains</td> <td class="fragment">Separate installs, multi-site, Domain Access</td></tr>
              <tr class="fragment"><td>One domain</td> <td class="fragment">OG, Single-site</td></tr>
              <tr class="fragment"><td>Simplified server admin</td> <td class="fragment">Domain Access, OG, Single-site</td></tr>
              <tr class="fragment"><td>Shared content</td> <td class="fragment">Domain Access, OG, Single-site</td></tr>
              <tr class="fragment"><td>Per-department ACL</td> <td class="fragment">Single-site, OG</td></tr>
              <tr class="fragment"><td>Department autonomy</td> <td class="fragment">Separate installs, multi-site (less so OG)</td></tr>
              <tr class="fragment"><td>Per-department Views</td> <td class="fragment">Separate installs, multi-site (less so OG)</td></tr>
              <tr class="fragment"><td>Staggered migration</td> <td class="fragment">Separate installs, multi-site, Domain Access, proxy server?</td></tr>
              <tr class="fragment"><td>Per department theme</td> <td class="fragment">Separate installs, Multi-site, Domain Access, OG</td></tr>
              <tr class="fragment"><td>Inexperienced site admins</td> <td class="fragment">Separate installs, Single-site</td></tr>
            </tbody>
          </table>


-->

          <section>
            <h1>IN A WORLD<br> <small>where CSS is your API to the browser</small></h1>
           <ul>
              <li class="fragment">Long, multi-element selectors protect against regression</li>
              <li class="fragment">The more CSS selectors the better</li>
              <li class="fragment">The more DIVs the better</li>
              <li class="fragment">The longer the class names the better</li>
            </ul>
          </section>

          <section>
            <h2>Drupal Core <br>
              <small>exposes each </small/><br>internal data model layer<br> <small>as a </small>
<br>
              wrapping HTML element.</h2>
          </section>

          <section>
            <h2>"Sustainable Theming"</h2>
            <blockquote>“Generally the best way to achieve that goal is to rely heavily on CSS rather than HTML markup for laying out a page, and not hand-crafting every template for its specific use case; as soon as that specific use case changes, the template no longer makes sense.”</blockquote>
            <p><small><a href="http://drupalwatchdog.com/volume-1/issue-2/stacking-drupal">Larry "Crell" Garfield in Drupal Watchdog in 2011</a></small></p>
          </section>

          <section>
            <img src="assets/palantir-blog.png" alt="A screenshot of a portion of the Palantir Blog" />
            <p><small><a href="http://palantir.net/blog">Palantir's blog</a></small></p>

            <aside class="notes">
              <p>Palantir's current site was built early in the Drupal 7 cycle (Summer 2011). It's markup and CSS are a mix of the techniques that this talk refers to as "Past" and "Present"</p>
            </aside>
          </section>


        </section>


        <section id="present">
          
          <section>
            <h1>The PRESENT</h1>
          </section>

          <section>
            <h2>The Drupal 7 theme system is complex</h2>
            <img src="assets/theme-system.png" alt="The flow chart of Drupal's terrible theme system flow" />
            <p><small><a href="http://john.albin.net/drupal/arrays-of-doom">Diagram from John Albin Wilkins</a></small></p>
          </section>

          <section>
            <h2>Modifying markup with tools from Core</h2>
            <ul>
              <li class="fragment">Preprocess in modules and themes</li>
              <li class="fragment">Process in modules and themes</li>
              <li class="fragment">theme hook suggestions for theme functions and templates</li>
              <li class="fragment">Field Formatters</li>
              <li class="fragment">hook_field_extra_fields</li>
              <li class="fragment">Writing new theme functions</li>
              <li class="fragment">Render arrays</li>
              <li class="fragment">hook_node_load</li>
            </ul>
          </section>

          <section>
            <h2>And then there's Contrib</h2>
            <ul>
              <li class="fragment">Panels, Page Manager, Panels Everywhere, Mini Panels, Panelizer</li>
              <li class="fragment">Display Suite layouts</li>
              <li class="fragment">Views Display plugins</li>
              <li class="fragment">Suppress unwanted divs with Fences</li>
              <li class="fragment">Add View Modes</li>
            </ul>
          </section>

          <section>
            <h2>Rendering in Drupal can feel like ...</h2>
            <img src="assets/plinko.gif" alt="Plinko!" />
          </section>

          <section>
            <h2>Or Maybe ...</h2>
            <img src="assets/mouse-trap.jpg" alt="The board game Mouse Trap" />
          </section>


          <section>
            <h1>WHAT ARE WE DOING?</h1>
            <h3>The "Sustainable Theming" mentality relies on the "themer" knowing how the theme system works.</h3>
          </section>

          <section>
            <h2>How many people know how this works?</h2>
            <img src="assets/theme-system.png" alt="The flow chart of Drupal's terrible theme system flow" />
            <p><small><a href="http://john.albin.net/drupal/arrays-of-doom">Diagram from John Albin Wilkins</a></small></p>
          </section>


<!-- In chasing easy, we completely lost simple. And as simple got lost, so did easy. -->

<!-- use theme(node) vs theme(item_list) example. -->

<!-- @todo, work in the simple vs easy dynamic -->


          <section>
            <h1>Back to the Givens!</h1>
          </section>

          <section>
            <h1>GIVEN <small>(NOW)</small></h1>
            <h2>The client wants a RESPONSIVE site</h2>
            <h3>The designers must do some work in CSS</h3>
            <aside class="notes"><p></p> 
            </aside>
          </section>

          <section>
            <h2>Responsive</h2>
            <img src="assets/PRI_6.jpg" alt="The Public Radio International site shown on different devices" />
            <p><small><a href="http://palantir.net/experience/public-radio-international">Public Radio International</a></small></p>
            <aside class="notes">
              <p>Responsive Design made it near impossible to say with a straight face, "I designed a website" when you made a static picture of the site in Photoshop. You're not done designing until you show how the site behaves on representative set of devices. For the time being, the only way to do that is by working in the actual medium of HTML and CSS.</p>
            </aside>
          </section>

          <section>
            <h1>GIVEN <small>(NOW)</small></h1>
            <h2>The designs are in HTML/CSS</h2>
            <h3>We no longer want Drupal's HTML and CSS. We already have some.</h3>
            <aside class="notes"><p>This given starts flips the mindset of the past. When the canonical designs are HTML/CSS, why would you rewrite the code for Drupal?</p> 
            </aside>
          </section>

          <section>
            <h1>GIVEN <small>(NOW)</small></h1>
            <h2>Our designers think in Design Components</h2>
            <h3>Our job is now to make Drupal print those Design Components</h3>
            <aside class="notes"><p></p> 
            </aside>
          </section>

          <section>
            <h2>How do you map Design Components to Drupal?</h2> @todo Show before after markup
            <ul>
              <li class="fragment">Panels, Page Manager, Panels Everywhere, Mini Panels, Panelizer</li>
              <li class="fragment">Display Suite layouts</li>
              <li class="fragment">Views Display plugins</li>
              <li class="fragment">Suppress unwanted divs with Fences</li>
              <li class="fragment">Add View Modes</li>
            </ul>
          </section>

          <section>
            <h2>Modifying markup with tools beyond core</h2>
            <ul>
              <li class="fragment">Define ideal markup in a style guide / prototype</li>
              <li class="fragment">Map design objects to Panels layout and style plugins</li>
              <li class="fragment">Display Suite layouts</li>
              <li class="fragment">Views Display plugins</li>
              <li class="fragment">Suppress unwanted divs with Fences</li>
              <li class="fragment">Add View Modes</li>
            </ul>
          </section>

          <section>
            <h2>Panels is our go-to tool for mapping Design Components</h2>
            <ul>
              <li class="fragment">Define ideal markup in a style guide / prototype</li>
              <li class="fragment">Map design objects to Panels layout and style plugins</li>
              <li class="fragment">Display Suite layouts</li>
              <li class="fragment">Views Display plugins</li>
              <li class="fragment">Suppress unwanted divs with Fences</li>
              <li class="fragment">Add View Modes</li>
            </ul>
          </section>
        </section>



        <section id="present">

          <section>
            <h1>The FUTURE</h1>
          </section>

          <section>
            <h1>GIVEN <small>(now/future)</small></h1>
            <h2>Clients will see the value in decoupling</h2>
            <h3>And will stay on on the same Drupal versions while re-doing the front end</h3>
            <aside class="notes"><p>For years we've been telling clients to skip major versions of Drupal. We've said "If you're on Drupal 5, wait for 7. If you're on Drupal 6, wait for Drupal 8." That doesn't work so well if you launch a D6 site in 2009 and need a responsive site yesterday. So we've done a lot of Drupal 6 to Drupal 7 upgrades for responsive. The admin-side benefits are nice, but secondary motivations for most many clients. What if we could stay on the same Drupal version?</p> 
            </aside>
          </section>

          <section>
            <img src="assets/toddross-coupled" alt="Timeline of decoupled sites" />
            <p><small><a href="https://twitter.com/ToddRoss/status/495245469543849984">Todd Ross Nienkerk: "Future of the CMS"</a></small></p>
            <aside class="notes">
              <p>This diagram shows what we do now and it is painful.</p>
            </aside>
          </section>

          <section>
            <img src="assets/toddross-decoupled" alt="Timeline of decoupled sites" />
            <p><small><a href="https://twitter.com/ToddRoss/status/495245469543849984">Todd Ross Nienkerk: "Future of the CMS"</a></small></p>
            <aside class="notes">
              <p>To make a decoupled approach work, you need a clear definition of which things happen on which sides.</p>
            </aside>
          </section>

          <section>
            <h1>GIVEN <small>(now/future)</small></h1>
            <h3>
              Headless, Headless, Headless, Headless, 
              Headless, Headless, Headless, Headless, 
              Headless, Headless, Headless, Headless.              
            </h3>
              <p>In the session description I promised a dozen references to Headless Drupal</p> 
            <aside class="notes"><p></p> 
            </aside>
          </section>

          <section>
            <h1>GIVEN <small>(now/future)</small></h1>
            <h3>Front-end web practices are changing faster than those server-side</h3>
            <h3>So we should look for common patterns</h3>
            <aside class="notes"><p></p> 
            </aside>
          </section>


          <section>
            <h1>GIVEN <small>(now/future)</small></h1>
            <h3>Front-end web practices are changing faster than those server-side</h3>
            <h3>So we should look for common patterns</h3>
            <aside class="notes"><p></p> 
            </aside>
          </section>

          <section>
            <h2>Patterns in modern Front-end that Drupal will have to better accommodate</h2>
            <ul>
              <li class="fragment">Data Binding</li>
              <li class="fragment">Encapsulation, Encapsulation, Encapsulation</li>
              <li class="fragment">Cleaner Exension</li>
              <li class="fragment"></li>
           </ul>
            <aside class="notes"><p>Angular, Ember, Polymer and countless others expect to be given a model to which they can bind.</p> 
            </aside>
         </section>





          <section>
            <h2>You are moving to the future when...</h2>
            <ul>
              <li class="fragment">You can explain where you draw lines between data and presentation</li>
              <li class="fragment">You name your Design Components independent of Drupal</li>
              <li class="fragment">Your templates and functions are named after Design Components, not Drupal data structures</li>
              <li class="fragment">You can make changes to front end code used by Drupal (CSS, templates, JS) outside of your Drupal
                <ul>
                 <li class="fragment">With CSS from a static prototype</li>
                 <li class="fragment">With encapsulated JS</li>
                 <li class="fragment">With reusable templates</li>
               </ul>
             </li>
             <li class="fragment">You can imagine a Front End Developer on a Drupal project not knowing PHP</li>
           </ul>
         </section>

       </section>


       <section id="final">


        <section>
          <h2>The PAST</h2>
          <p>The "PAST" Drupal front-end mentality accepts Drupal's preference to expose every internal layer through HTML elements and classes.</p>
        </section>

        <section>
          <h2>The PAST</h2>
          <p>The "PAST" Drupal front-end mentality makes the real site LOOK LIKE the designs</p>
        </section>

        <section>
          <h2>The Present</h2>
          <p>The present Drupal front-end mentality is one of MATCHING THE (important) MARKUP of the style guide / prototype</p>
        </section>


        <section>
          <h2>FUTURE</h2>
          <p>The "FUTURE" Drupal front-end mentality makes the real site BE the designs</p>
        </section>


        <section>
          <div>
            <h2>Steve Persch</h2>
            <p><a href="http://www.palantir.net/">Palantir.net</a></p>
            <q>Let's make something good together</q>
            <p>Keep tabs on our work at <a href="http://twitter.com/Palantir">@Palantir</a></p>
          </div>
        </section>
      </section>


    </div>
  </div>

    <footer class="palantir-logo">
      <a href="http://www.palantir.net/"><img src="palantir/palantirnet-logo-4c-reversed.svg" alt="Palantir.net logo" height="37" /></a>
    </footer>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>
  </body>
</html>



<!-- @todo Define web component -->

<!--
<div class="node node-article node-promoted node-teaser contextual-links-region clearfix" id="node-1">

        <h2><a href="/node/1">Building Bridges Between Communities</a></h2>
      <div class="meta submitted">
            Submitted by <a class="username" title="View user profile." href="/user/2">Colleen Carroll</a> on Wed, 11/05/2014 - 17:24    </div>
  
  <div class="content clearfix">
    <div class="field field-name-field-image field-type-image field-label-hidden"><div class="field-items"><div class="field-item even"><a href="/node/1"><img width="220" height="156" alt="" src="sites/default/files/styles/medium/public/field/image/illo-ColleenIsland_20140925_02.png?itok=VQXS87jd"></a></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>Larry Garfield’s <a href="http://www.palantir.net/blog/d8ftw-your-next-drupal-hire-isnt-drupal-hire">recent post</a> talks about the need for Drupal developers and employers to "get off the island" and reach outside the existing Drupal community for opportunities and talent.</p>
</div></div></div>  </div>

      <div class="link-wrapper">
      <ul class="links inline"><li class="node-readmore first last"><a title="Building Bridges Between Communities" rel="tag" href="/node/1">Read more<span class="element-invisible"> about Building Bridges Between Communities</span></a></li>
</ul>    </div>
  
  
</div>

-->
